(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,a,t){e.exports=t(69)},65:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){},69:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),c=t(15),s=t.n(c),u=t(13),i=t(11),o=t(4),l=t(17),m=t(33),d=t.n(m)()(),h={changeName:d("CHANGE_NAME"),changeAge:d("CHANGE_AGE"),initializeForm:d("INITIALIZE_FORM"),postForm:d.async("POST_FORM")},f={editName:d("EDIT_NAME"),editAge:d("EDIT_AGE"),getCharacters:d.async("GET_CHARACTERS"),updateCharacters:d.async("UPDATE_CHARACTERS"),deleteCharacters:d.async("DELETE_CHARACTERS")},b=Object(l.reducerWithInitialState)({name:"",age:"",error:{name:"",age:""}}).case(h.changeName,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{name:a})})).case(h.changeAge,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{age:a})})).case(h.initializeForm,(function(e){return Object(o.a)(Object(o.a)({},e),{},{name:"",age:""})})).case(h.postForm.started,(function(e){return Object(o.a)({},e)})).case(h.postForm.done,(function(e){return Object(o.a)({},e)})).case(h.postForm.failed,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{error:{name:a.error.name,age:a.error.age}})})),g=Object(l.reducerWithInitialState)({name:"",age:"",isFetching:!1,characterArray:[]}).case(f.editName,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{name:a})})).case(f.editAge,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{age:a})})).case(f.getCharacters.started,(function(e){return Object(o.a)(Object(o.a)({},e),{},{isFetching:!0})})).case(f.getCharacters.done,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{isFetching:!1,characterArray:a.result})})).case(f.getCharacters.failed,(function(e){return Object(o.a)(Object(o.a)({},e),{},{isFetching:!1})})).case(f.updateCharacters.started,(function(e){return Object(o.a)({},e)})).case(f.updateCharacters.done,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{characterArray:a.result})})).case(f.updateCharacters.failed,(function(e){return Object(o.a)({},e)})).case(f.deleteCharacters.started,(function(e){return Object(o.a)({},e)})).case(f.deleteCharacters.done,(function(e,a){return Object(o.a)(Object(o.a)({},e),{},{characterArray:a.result})})).case(f.deleteCharacters.failed,(function(e){return Object(o.a)({},e)})),p=t(34),O=t(36),j=t(7),C=t.n(j),E=t(12),A=t(5),_=t(10),v=t.n(_),N=C.a.mark(x),y=function(e,a,t){return e.preventDefault(),v.a.post("/api/characters",{name:a,age:t}).then((function(r){return{characterArray:r.data,e:e,name:a,age:t}})).catch((function(e){return{error:e}}))};function x(e){var a,t,r,n,c,s;return C.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(A.b)(y,e.payload.e,e.payload.name,e.payload.age);case 2:if(a=u.sent,t=a.characterArray,r=a.e,n=a.name,c=a.age,s=a.error,!(t&&r&&n&&c)){u.next=17;break}return u.next=11,Object(A.c)(h.postForm.done({params:{},result:t}));case 11:return u.next=13,Object(A.c)(f.getCharacters.done({params:{},result:t}));case 13:return u.next=15,Object(A.c)(h.initializeForm());case 15:u.next=19;break;case 17:return u.next=19,Object(A.c)(h.postForm.failed({params:{},error:s.response.data}));case 19:case"end":return u.stop()}}),N)}var F=[Object(A.d)(h.postForm.started,x)],k=C.a.mark(L),w=function(){return v.a.get("/api/characters").then((function(e){return{characterArray:e.data}})).catch((function(e){return{error:e}}))};function L(){var e,a,t;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(A.b)(w);case 2:if(e=r.sent,a=e.characterArray,t=e.error,!a){r.next=10;break}return r.next=8,Object(A.c)(f.getCharacters.done({params:{},result:a}));case 8:r.next=12;break;case 10:return r.next=12,Object(A.c)(f.getCharacters.failed({params:{},error:t}));case 12:case"end":return r.stop()}}),k)}var I=[Object(A.d)(f.getCharacters.started,L)],T=C.a.mark(R),S=function(e,a,t){return v.a.put("/api/characters",{id:e,name:a,age:t}).then((function(r){return{characterArray:r.data,id:e,name:a,age:t}})).catch((function(e){return{error:e}}))};function R(e){var a,t,r,n,c,s;return C.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(A.b)(S,e.payload.id,e.payload.name,e.payload.age);case 2:if(a=u.sent,t=a.characterArray,r=a.id,n=a.name,c=a.age,s=a.error,console.log(r,n,c),!(t&&r&&n&&c)){u.next=14;break}return u.next=12,Object(A.c)(f.updateCharacters.done({params:{},result:t}));case 12:u.next=16;break;case 14:return u.next=16,Object(A.c)(f.updateCharacters.failed({params:{},error:s}));case 16:case"end":return u.stop()}}),T)}var z=[Object(A.d)(f.updateCharacters.started,R)],D=C.a.mark(H),G=function(e){return v()({method:"delete",url:"/api/characters",data:{id:e}}).then((function(a){return{characterArray:a.data,id:e}})).catch((function(e){return{error:e}}))};function H(e){var a,t,r,n;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(A.b)(G,e.payload.id);case 2:if(a=c.sent,t=a.characterArray,r=a.id,n=a.error,!t||!r){c.next=11;break}return c.next=9,Object(A.c)(f.deleteCharacters.done({params:{},result:t}));case 9:c.next=13;break;case 11:return c.next=13,Object(A.c)(f.deleteCharacters.failed({params:{},error:n}));case 13:case"end":return c.stop()}}),D)}var M=[Object(A.d)(f.deleteCharacters.started,H)],B=C.a.mark(W);function W(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.a)([].concat(Object(E.a)(F),Object(E.a)(I),Object(E.a)(z),Object(E.a)(M)));case 2:case"end":return e.stop()}}),B)}var J=Object(O.a)(),P=Object(p.createLogger)({diff:!0,collapsed:!0}),V=Object(i.e)(Object(i.c)({form:b,character:g}),{},Object(i.a)(J,P));J.run(W);var U=V,Z=(t(65),function(e){var a=e.name,t=e.age,r=e.error;return n.a.createElement("div",{className:"AddForm"},n.a.createElement("h2",{className:"AddForm__title"},"\u30d5\u30a9\u30fc\u30e0"),n.a.createElement("form",{onSubmit:function(r){return e.postForm(r,a,t)}},n.a.createElement("input",{className:"AddForm__input",placeholder:"\u540d\u524d",value:a,onChange:function(a){return e.changeName(a.target.value)}}),n.a.createElement("p",null,r.name),n.a.createElement("input",{className:"AddForm__input",placeholder:"\u5e74\u9f62",value:t,onChange:function(a){return e.changeAge(a.target.value)}}),n.a.createElement("p",null,r.age),n.a.createElement("button",{className:"AddForm__submit",type:"submit"},"\u9001\u4fe1")))}),$=Object(u.b)((function(e){return Object(o.a)({},e.form)}),(function(e){return{changeName:function(a){return e(h.changeName(a))},changeAge:function(a){return e(h.changeAge(a))},initializeForm:function(){return e(h.initializeForm())},postForm:function(a,t,r){return e(h.postForm.started({params:{},e:a,name:t,age:r}))}}}))(Z),q=t(35),K=(t(66),function(e){var a=Object(r.useState)(new Array(e.characterArray.length).fill(!1)),t=Object(q.a)(a,2),c=t[0],s=t[1];Object(r.useEffect)((function(){e.getCharacters()}),[]);var u=Object(r.useCallback)((function(e){var a=Object(E.a)(c);a[e]=!a[e],s(a)}),[c]);return n.a.createElement("div",{className:"CharacterList"},e.isFetching?n.a.createElement("h2",{className:"CharacterList__title"},"Now Loading..."):n.a.createElement("div",null,n.a.createElement("h2",{className:"CharacterList__title"},"\u30ea\u30b9\u30c8"),n.a.createElement("ul",{className:"CharacterList__list"},e.characterArray.map((function(a,t){return n.a.createElement("li",{key:a._id,className:"CharacterList__listItem"},c[t]?n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{className:"CharacterList__edit",defaultValue:a.name,onChange:function(a){return e.editName(a.target.value)}}),n.a.createElement("input",{className:"CharacterList__edit",defaultValue:a.age,onChange:function(a){return e.editAge(a.target.value)}})):"".concat(a.name," (").concat(a.age,")"),n.a.createElement("div",{className:"CharacterList__listArea"},n.a.createElement("button",{className:"CharacterList__listButton",onClick:function(){e.updateCharacters(a._id,e.name?e.name:a.name,e.age?e.age:a.age),u(t)}},n.a.createElement("i",{className:"gg-edit-markup"})),n.a.createElement("button",{className:"CharacterList__listButton",onClick:function(){return e.deleteCharacters(a._id)}},n.a.createElement("i",{className:"gg-trash"}))))})))))}),Q=Object(u.b)((function(e){return Object(o.a)({},e.character)}),(function(e){return{editName:function(a){return e(f.editName(a))},editAge:function(a){return e(f.editAge(a))},getCharacters:function(){return e(f.getCharacters.started({params:{}}))},updateCharacters:function(a,t,r){return e(f.updateCharacters.started({params:{},id:a,name:t,age:r}))},deleteCharacters:function(a){return e(f.deleteCharacters.started({params:{},id:a}))}}}))(K),X=(t(67),function(){return n.a.createElement("div",{className:"App"},n.a.createElement($,null),n.a.createElement(Q,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(68);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(u.a,{store:U},n.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.6a1097a1.chunk.js.map